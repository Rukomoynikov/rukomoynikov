var W=Object.defineProperty;var B=s=>{throw TypeError(s)};var X=(s,e,r)=>e in s?W(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var F=(s,e,r)=>X(s,typeof e!="symbol"?e+"":e,r),U=(s,e,r)=>e.has(s)||B("Cannot "+r);var a=(s,e,r)=>(U(s,e,"read from private field"),r?r.call(s):e.get(s)),v=(s,e,r)=>e.has(s)?B("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,r),Y=(s,e,r,t)=>(U(s,e,"write to private field"),t?t.call(s,r):e.set(s,r),r);import{e as C,F as k,L as I,G as ee,a as $,h as q,q as y,A as se,ae as re,j as te,b as ae,$ as ne,x as ie,H as fe,y as ue,k as ce,z,u as le,aq as G,m as de,ar as oe,_ as j,as as _e,g as A,a2 as he,at as ve,au as pe,av as be,aw as Z,T as Se,d as me,ax as Pe,a1 as O,ay as Ae,l as Ee,az as ge,P as Te,aA as xe,aB as Re,aC as we,aD as H,a9 as K,aE as Ie,aF as ye,aG as De,aH as Oe}from"./BFQ7Yu01.js";var o,_,d,p,E,g,R;class Le{constructor(e,r=!0){F(this,"anchor");v(this,o,new Map);v(this,_,new Map);v(this,d,new Map);v(this,p,new Set);v(this,E,!0);v(this,g,()=>{var e=C;if(a(this,o).has(e)){var r=a(this,o).get(e),t=a(this,_).get(r);if(t)k(t),a(this,p).delete(r);else{var i=a(this,d).get(r);i&&(a(this,_).set(r,i.effect),a(this,d).delete(r),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),t=i.effect)}for(const[n,u]of a(this,o)){if(a(this,o).delete(n),n===e)break;const f=a(this,d).get(u);f&&(I(f.effect),a(this,d).delete(u))}for(const[n,u]of a(this,_)){if(n===r||a(this,p).has(n))continue;const f=()=>{if(Array.from(a(this,o).values()).includes(n)){var h=document.createDocumentFragment();re(u,h),h.append($()),a(this,d).set(n,{effect:u,fragment:h})}else I(u);a(this,p).delete(n),a(this,_).delete(n)};a(this,E)||!t?(a(this,p).add(n),ee(u,f,!1)):f()}}});v(this,R,e=>{a(this,o).delete(e);const r=Array.from(a(this,o).values());for(const[t,i]of a(this,d))r.includes(t)||(I(i.effect),a(this,d).delete(t))});this.anchor=e,Y(this,E,r)}ensure(e,r){var t=C,i=te();if(r&&!a(this,_).has(e)&&!a(this,d).has(e))if(i){var n=document.createDocumentFragment(),u=$();n.append(u),a(this,d).set(e,{effect:q(()=>r(u)),fragment:n})}else a(this,_).set(e,q(()=>r(this.anchor)));if(a(this,o).set(t,e),i){for(const[f,c]of a(this,_))f===e?t.skipped_effects.delete(c):t.skipped_effects.add(c);for(const[f,c]of a(this,d))f===e?t.skipped_effects.delete(c.effect):t.skipped_effects.add(c.effect);t.oncommit(a(this,g)),t.ondiscard(a(this,R))}else y&&(this.anchor=se),a(this,g).call(this)}}o=new WeakMap,_=new WeakMap,d=new WeakMap,p=new WeakMap,E=new WeakMap,g=new WeakMap,R=new WeakMap;function Ye(s,e,r=!1){y&&le();var t=new Le(s),i=r?ne:0;function n(u,f){if(y){const h=ie(s)===fe;if(u===h){var c=ue();ce(c),t.anchor=c,z(!1),t.ensure(u,f),z(!0);return}}t.ensure(u,f)}ae(()=>{var u=!1;e((f,c=!0)=>{u=!0,n(c,f)}),u||n(!1,null)},i)}let x=!1,D=Symbol();function Ce(s,e,r){const t=r[e]??(r[e]={store:null,source:de(void 0),unsubscribe:G});if(t.store!==s&&!(D in r))if(t.unsubscribe(),t.store=s??null,s==null)t.source.v=void 0,t.unsubscribe=G;else{var i=!0;t.unsubscribe=oe(s,n=>{i?t.source.v=n:j(t.source,n)}),i=!1}return s&&D in r?_e(s):A(t.source)}function $e(){const s={};function e(){he(()=>{for(var r in s)s[r].unsubscribe();ve(s,D,{enumerable:!1,value:!0})})}return[s,e]}function Me(s){var e=x;try{return x=!1,[s(),x]}finally{x=e}}const Ne={get(s,e){if(!s.exclude.includes(e))return A(s.version),e in s.special?s.special[e]():s.props[e]},set(s,e,r){if(!(e in s.special)){var t=O;try{K(s.parent_effect),s.special[e]=Be({get[e](){return s.props[e]}},e,Z)}finally{K(t)}}return s.special[e](r),H(s.version),!0},getOwnPropertyDescriptor(s,e){if(!s.exclude.includes(e)&&e in s.props)return{enumerable:!0,configurable:!0,value:s.props[e]}},deleteProperty(s,e){return s.exclude.includes(e)||(s.exclude.push(e),H(s.version)),!0},has(s,e){return s.exclude.includes(e)?!1:e in s.props},ownKeys(s){return Reflect.ownKeys(s.props).filter(e=>!s.exclude.includes(e))}};function qe(s,e){return new Proxy({props:s,exclude:e,special:{},version:Ee(0),parent_effect:O},Ne)}function Be(s,e,r,t){var M;var i=!xe||(r&Re)!==0,n=(r&ge)!==0,u=(r&Ie)!==0,f=t,c=!0,h=()=>(c&&(c=!1,f=u?Te(t):t),f),S;if(n){var J=De in s||Oe in s;S=((M=pe(s,e))==null?void 0:M.set)??(J&&e in s?l=>s[e]=l:void 0)}var m,L=!1;n?[m,L]=Me(()=>s[e]):m=s[e],m===void 0&&t!==void 0&&(m=h(),S&&(i&&be(),S(m)));var b;if(i?b=()=>{var l=s[e];return l===void 0?h():(c=!0,l)}:b=()=>{var l=s[e];return l!==void 0&&(f=void 0),l===void 0?f:l},i&&!(r&Z))return b;if(S){var Q=s.$$legacy;return function(l,T){return arguments.length>0?((!i||!T||Q||L)&&S(T?b():l),l):b()}}var w=!1,P=(r&we?Se:me)(()=>(w=!1,b()));n&&A(P);var V=O;return function(l,T){if(arguments.length>0){const N=T?A(P):i&&n?Pe(l):l;return j(P,N),w=!0,f!==void 0&&(f=N),l}return ye&&w||V.f&Ae?P.v:A(P)}}export{Le as B,Ce as a,Ye as i,qe as l,Be as p,$e as s};
