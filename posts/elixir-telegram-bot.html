<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link href="../_app/immutable/assets/0.f4F2na6V.css" rel="stylesheet">
		<link href="../_app/immutable/assets/TwoColsContainer.hJJE-lY0.css" rel="stylesheet">
		<link href="../_app/immutable/assets/4.hMnRKZMS.css" rel="stylesheet">
		<link href="../_app/immutable/assets/Title.6xBkhgf5.css" rel="stylesheet">
		<link href="../_app/immutable/assets/Paragraph.5TISkVa8.css" rel="stylesheet">
		<link href="../_app/immutable/assets/CodeBlock.RVFEQaE9.css" rel="stylesheet">
		<link href="../_app/immutable/assets/CodeBlockInline.Z00O3BDJ.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.Inmzhpnl.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/scheduler.PwXR70NT.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/singletons.BrKaankW.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.zjZhA0zo.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.oVAL4969.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.Z64XBgo0.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/TwoColsContainer.0T8RqlZv.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/stores.C8NggKGb.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/4.X_BTATD2.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Title.dLRQFlZi.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Paragraph.2SrNVUI6.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CodeBlock.QmJGiRXx.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CodeBlockInline.4ZYn47f2.js"><title>How to create Telegram bot with Elixir - Part 1 | Max Rukomoynikov</title><!-- HEAD_svelte-118r9b8_START --><meta name="description" content="This is the first part of three in the series. There you will find creating foundation and answering to users."><link rel="canonical" href="/posts/elixir-telegram-bot"><meta name="keywords" content="rails, ruby, typescript, react, elixir, rust"><meta name="twitter:image" content="https://rukomoynikov.ru/_app/immutable/assets/elixir-telegram-bot-facebook-share.MYX1LgLJ.jpeg"><meta name="robots" content="index,follow"><meta name="googlebot" content="index,follow"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@MRukomoynikov"><meta name="twitter:description" content="This is the first part of three in the series. There you will find creating foundation and answering to users."><meta name="twitter:image" content="https://rukomoynikov.ru/_app/immutable/assets/elixir-telegram-bot-facebook-share.MYX1LgLJ.jpeg"><meta property="og:title" content="How to create Telegram bot with Elixir - Part 1 | Max Rukomoynikov"><meta property="og:description" content="This is the first part of three in the series. There you will find creating foundation and answering to users."><meta property="og:image:url" content="https://rukomoynikov.ru/_app/immutable/assets/elixir-telegram-bot-facebook-share.MYX1LgLJ.jpeg"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="og:image:alt" content="How to create Telegram bot with Elixir - Part 1 | Max Rukomoynikov"><meta property="og:url" content="/posts/elixir-telegram-bot"><meta property="og:type" content="website"><meta property="og:site_name" content="How to create Telegram bot with Elixir - Part 1 | Max Rukomoynikov"><!-- HEAD_svelte-118r9b8_END -->
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">   <div class="container--1200 svelte-1i3ol08"><div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><h1 class="svelte-6qsvt1" data-svelte-h="svelte-1qy9wyc"><a href="/">Max Rukomoynikov</a></h1> <div data-svelte-h="svelte-1imkv5r">I love to create. Developer and designer. Looking forward to make cool things.</div></div>  </div> </div> <div class="container--1200 svelte-1i3ol08"><h1 class=" svelte-1lrv44l">Introduction to Telegram Bots API </h1> <h2 class=" svelte-1lrv44l">Exchanging messages with Telegram </h2> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><p class="paragraph svelte-5wsfqn">Telegram supports two types of integration: webhooks and polling. Webhooks it&#39;s a type when
			Telegram sends request to your server whenever bot recevied a message from the user. There
			pros and cons of that type of integration. Webhooks are more sustainable in general. For
			webhooks it&#39;s necessary to have web-server with external IP adress. This server will receive
			new messages through get requests from Telegram. During development you can use ngrock. </p></div>  </div> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><p class="paragraph svelte-5wsfqn">Polling is a constant polling of the Telegram server for new messages. For polling, you do not
			need a server and an external address. Simple application that sends requests to the Telegram
			server without stopping is enough. </p></div> <div class="col-2 svelte-1usoguu"><div slot="aside"><ul class="links-list svelte-5n4j8k"><li class="svelte-5n4j8k"><a href="https://core.telegram.org/bots/api#getting-updates" class="links-list__link svelte-5n4j8k">Documentation about Telegram bots</a> </li> </ul></div></div> </div> <h2 class=" svelte-1lrv44l">Obtaining a token from Telegram </h2> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><p class="paragraph svelte-5wsfqn">The token for Telegram requests must be obtained from the BotFather bot. </p></div>  </div> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><div class="video svelte-1lat3fd"><video controls class=""><source src="/_app/immutable/assets/api_token.qsDXkcQc.mp4" type="video/mp4"><track src="" kind="captions" srclang="en" label="english_captions">
  Your browser does not support the video tag.</video>  </div></div> <div class="col-2 svelte-1usoguu"><div slot="aside"><ul class="links-list svelte-5n4j8k"><li class="svelte-5n4j8k"><a href="https://t.me/botfather" class="links-list__link svelte-5n4j8k">BotFather</a> </li> </ul></div></div> </div> <h2 class=" svelte-1lrv44l">Elixir </h2> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><p class="paragraph svelte-5wsfqn">Elixir is a functional programming language. Based on the another programming language Erlang.
			The main advantage of Elixir is the ability to manage a huge number of processes. These
			processes are also made in a special way, so they take up significantly less memory and
			processor time than normal computer processes. </p></div> <div class="col-2 svelte-1usoguu"><div slot="aside"><ul class="links-list svelte-5n4j8k"><li class="svelte-5n4j8k"><a href="https://elixir-lang.org/install.html" class="links-list__link svelte-5n4j8k">How to install Elixir one elixir-lang.org</a> </li><li class="svelte-5n4j8k"><a href="https://gist.github.com/mikoscz/4d2a0052d4cdaaa027bc8a8d6af1e817" class="links-list__link svelte-5n4j8k">Installing with asdf package manager</a> </li> </ul></div></div> </div> <h2 class=" svelte-1lrv44l">The application </h2> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><p class="paragraph svelte-5wsfqn">I will gradually complicate the application. I&#39;ll start with a echo bot that sends a message
			back in response to a message. Next, I will add saving users to the database. And in the end,
			I&#39;ll try to make it a little useful - upon request from the user, the bot will send summary
			information about the stock market. </p></div>  </div> <h3 class=" svelte-1lrv44l">Creation of the skeleton of the application and installation of the necessary tools </h3> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><div class="codeBlock svelte-1may0mh">  <!-- HTML_TAG_START --><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">mix</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">new</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">stocks_bot</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">--sup</span></span></code></pre><!-- HTML_TAG_END --></div> </div>  </div> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><p class="paragraph svelte-5wsfqn">First you need to create a new application. The <span class="code svelte-9l3qyq">--sup </span> option
			adds a supervisor to the application and starts it at startup. After creation, the structure of
			the application should look like this: </p></div>  </div> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><div class="codeBlock svelte-1may0mh">  <!-- HTML_TAG_START --><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">├──</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">README.md</span></span>
<span class="line"><span style="color: #DCDCAA">├──</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">lib</span></span>
<span class="line"><span style="color: #DCDCAA">│</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">├──</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">stocks_bot</span></span>
<span class="line"><span style="color: #DCDCAA">│</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">│</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">└──</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">application.ex</span></span>
<span class="line"><span style="color: #DCDCAA">│</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">└──stocks_bot.ex</span></span>
<span class="line"><span style="color: #DCDCAA">├──</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">mix.exs</span></span>
<span class="line"><span style="color: #DCDCAA">└──</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">test</span></span>
<span class="line"><span style="color: #DCDCAA">├──</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">stocks_bot_test.exs</span></span>
<span class="line"><span style="color: #DCDCAA">└──</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">test_helper.exs</span></span></code></pre><!-- HTML_TAG_END --></div> </div>  </div> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><p class="paragraph svelte-5wsfqn">Additionally, you need to install HTTPoison to send requests and Jason to work with JSON in
			responses from the Telegram server. </p></div>  </div> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><div class="codeBlock svelte-1may0mh codeBlock--with-filename"> <div class="fileName svelte-1may0mh">File: stocks_bot/mix.exs</div> <!-- HTML_TAG_START --><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">defp</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">deps</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">do</span></span>
<span class="line"><span style="color: #D4D4D4">  [</span></span>
<span class="line"><span style="color: #D4D4D4">    {:httpoison, </span><span style="color: #CE9178">&quot;~&gt; 1.8&quot;</span><span style="color: #D4D4D4">},</span></span>
<span class="line"><span style="color: #D4D4D4">    {:jason, </span><span style="color: #CE9178">&quot;~&gt; 1.2&quot;</span><span style="color: #D4D4D4">}</span></span>
<span class="line"><span style="color: #D4D4D4">  ]</span></span>
<span class="line"><span style="color: #C586C0">end</span></span></code></pre><!-- HTML_TAG_END --></div> </div>  </div> <h2 class=" svelte-1lrv44l">Receiving user message </h2> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><div class="codeBlock svelte-1may0mh codeBlock--with-filename"> <div class="fileName svelte-1may0mh">File: stocks_bot/lib/stocks_bot.ex</div> <!-- HTML_TAG_START --><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">defmodule</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">StocksBot</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">do</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">@basic_url</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;https://api.telegram.org/bot&quot;</span><span style="color: #D4D4D4"> &lt;&gt; </span><span style="color: #CE9178">&quot;Token from BotFather&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">get_updates</span><span style="color: #D4D4D4">(offset \\ </span><span style="color: #569CD6">nil</span><span style="color: #D4D4D4">) </span><span style="color: #C586C0">do</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #C586C0">with</span><span style="color: #D4D4D4"> {:ok, %</span><span style="color: #4EC9B0">HTTPoison</span><span style="color: #D4D4D4">.</span><span style="color: #4EC9B0">Response</span><span style="color: #D4D4D4">{status_code: </span><span style="color: #B5CEA8">200</span><span style="color: #D4D4D4">, body: body}} =</span></span>
<span class="line"><span style="color: #D4D4D4">           </span><span style="color: #DCDCAA">updates_url</span><span style="color: #D4D4D4">(offset) |&gt; </span><span style="color: #4EC9B0">HTTPoison</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">get</span><span style="color: #D4D4D4">(),</span></span>
<span class="line"><span style="color: #D4D4D4">         {:ok, data} = </span><span style="color: #4EC9B0">Jason</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">decode</span><span style="color: #D4D4D4">(body) </span><span style="color: #C586C0">do</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #4EC9B0">IO</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">inspect</span><span style="color: #D4D4D4">(data[</span><span style="color: #CE9178">&quot;result&quot;</span><span style="color: #D4D4D4">])</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #C586C0">end</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">end</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">defp</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">updates_url</span><span style="color: #D4D4D4">(</span><span style="color: #6A9955">_offset</span><span style="color: #D4D4D4"> = </span><span style="color: #569CD6">nil</span><span style="color: #D4D4D4">) </span><span style="color: #C586C0">do</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">@basic_url</span><span style="color: #D4D4D4"> &lt;&gt; </span><span style="color: #CE9178">&quot;/getUpdates&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">end</span></span>
<span class="line"><span style="color: #C586C0">end</span></span></code></pre><!-- HTML_TAG_END --></div> </div> <div class="col-2 svelte-1usoguu"><div slot="aside"><ul class="links-list svelte-5n4j8k"><li class="svelte-5n4j8k"><a href="https://core.telegram.org/bots/api#getting-updates" class="links-list__link svelte-5n4j8k">Documentation about Telegram bots</a> </li> </ul></div></div> </div> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><p class="paragraph svelte-5wsfqn">Now you can try how it works. Send your bot a message. Then open your terminal and enter these
			commands. </p></div>  </div> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><div class="codeBlock svelte-1may0mh">  <!-- HTML_TAG_START --><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">iex</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-S</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">mix</span></span>
<span class="line"><span style="color: #DCDCAA">StocksBot.get_updates</span><span style="color: #D4D4D4">()</span></span></code></pre><!-- HTML_TAG_END --></div> </div>  </div> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><p class="paragraph svelte-5wsfqn">In the terminal you will see incoming message: </p></div>  </div> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><div class="codeBlock svelte-1may0mh">  <!-- HTML_TAG_START --><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">[</span></span>
<span class="line"><span style="color: #D4D4D4">  %{</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #CE9178">&quot;message&quot;</span><span style="color: #D4D4D4"> =&gt; %{</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #CE9178">&quot;chat&quot;</span><span style="color: #D4D4D4"> =&gt; %{</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;first_name&quot;</span><span style="color: #D4D4D4"> =&gt; </span><span style="color: #CE9178">&quot;Bender&quot;</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;id&quot;</span><span style="color: #D4D4D4"> =&gt; </span><span style="color: #B5CEA8">300011235</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;last_name&quot;</span><span style="color: #D4D4D4"> =&gt; </span><span style="color: #CE9178">&quot;Rodriguez&quot;</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;type&quot;</span><span style="color: #D4D4D4"> =&gt; </span><span style="color: #CE9178">&quot;private&quot;</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;username&quot;</span><span style="color: #D4D4D4"> =&gt; </span><span style="color: #CE9178">&quot;bender&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">      },</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #CE9178">&quot;date&quot;</span><span style="color: #D4D4D4"> =&gt; </span><span style="color: #B5CEA8">1636549063</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #CE9178">&quot;from&quot;</span><span style="color: #D4D4D4"> =&gt; %{</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;first_name&quot;</span><span style="color: #D4D4D4"> =&gt; </span><span style="color: #CE9178">&quot;Bender&quot;</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;id&quot;</span><span style="color: #D4D4D4"> =&gt; </span><span style="color: #B5CEA8">300011235</span><span style="color: #D4D4D4">,,</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;is_bot&quot;</span><span style="color: #D4D4D4"> =&gt; </span><span style="color: #569CD6">false</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;language_code&quot;</span><span style="color: #D4D4D4"> =&gt; </span><span style="color: #CE9178">&quot;ru&quot;</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;last_name&quot;</span><span style="color: #D4D4D4"> =&gt; </span><span style="color: #CE9178">&quot;Rodriguez&quot;</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;username&quot;</span><span style="color: #D4D4D4"> =&gt; </span><span style="color: #CE9178">&quot;bender&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">      },</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #CE9178">&quot;message_id&quot;</span><span style="color: #D4D4D4"> =&gt; </span><span style="color: #B5CEA8">1142</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #CE9178">&quot;text&quot;</span><span style="color: #D4D4D4"> =&gt; </span><span style="color: #CE9178">&quot;Hello&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    },</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #CE9178">&quot;update_id&quot;</span><span style="color: #D4D4D4"> =&gt; </span><span style="color: #B5CEA8">475896056</span></span>
<span class="line"><span style="color: #D4D4D4">  }</span></span>
<span class="line"><span style="color: #D4D4D4">]</span></span></code></pre><!-- HTML_TAG_END --></div> </div>  </div> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><p class="paragraph svelte-5wsfqn">If you try to receive messages again, the answer will be the same. This happens because it is
			necessary to indicate to the telegram which messages have already been received. To do this,
			take the <span class="code svelte-9l3qyq">update_id </span> of the last message, increase it to one and
			use it as a get parameter to receive new messages. </p></div>  </div> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><p class="paragraph svelte-5wsfqn">So far, the script receives one message and stops working, but it needs to continue listening
			to new messages. I&#39;ll fix it now. </p></div>  </div> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><div class="codeBlock svelte-1may0mh codeBlock--with-filename"> <div class="fileName svelte-1may0mh">File: stocks_bot/lib/stocks_bot.ex</div> <!-- HTML_TAG_START --><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">defmodule</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">StocksBot</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">do</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">@basic_url</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;https://api.telegram.org/bot&quot;</span><span style="color: #D4D4D4"> &lt;&gt; </span><span style="color: #CE9178">&quot;Token from BotFather&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">get_updates</span><span style="color: #D4D4D4">(offset \\ </span><span style="color: #569CD6">nil</span><span style="color: #D4D4D4">) </span><span style="color: #C586C0">do</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #C586C0">with</span><span style="color: #D4D4D4"> {:ok, %</span><span style="color: #4EC9B0">HTTPoison</span><span style="color: #D4D4D4">.</span><span style="color: #4EC9B0">Response</span><span style="color: #D4D4D4">{status_code: </span><span style="color: #B5CEA8">200</span><span style="color: #D4D4D4">, body: body}} =</span></span>
<span class="line"><span style="color: #D4D4D4">           </span><span style="color: #DCDCAA">updates_url</span><span style="color: #D4D4D4">(offset) |&gt; </span><span style="color: #4EC9B0">HTTPoison</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">get</span><span style="color: #D4D4D4">(),</span></span>
<span class="line"><span style="color: #D4D4D4">         {:ok, data} = </span><span style="color: #4EC9B0">Jason</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">decode</span><span style="color: #D4D4D4">(body) </span><span style="color: #C586C0">do</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #DCDCAA">parse_messages</span><span style="color: #D4D4D4">(data[</span><span style="color: #CE9178">&quot;result&quot;</span><span style="color: #D4D4D4">])</span></span>
<span class="line"><span style="color: #D4D4D4">      |&gt; </span><span style="color: #DCDCAA">get_last_update_id</span><span style="color: #D4D4D4">()</span></span>
<span class="line"><span style="color: #D4D4D4">      |&gt; </span><span style="color: #DCDCAA">get_updates</span><span style="color: #D4D4D4">()</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #C586C0">end</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">end</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">defp</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">parse_messages</span><span style="color: #D4D4D4">(messages) </span><span style="color: #C586C0">do</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #4EC9B0">Enum</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">each</span><span style="color: #D4D4D4">(messages, </span><span style="color: #C586C0">fn</span><span style="color: #D4D4D4"> message -&gt;</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #4EC9B0">IO</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">inspect</span><span style="color: #D4D4D4">(message)</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #C586C0">end</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    messages</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">end</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">defp</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">get_last_update_id</span><span style="color: #D4D4D4">([]), do: </span><span style="color: #569CD6">nil</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">defp</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">get_last_update_id</span><span style="color: #D4D4D4">(messages) </span><span style="color: #C586C0">do</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #4EC9B0">List</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">last</span><span style="color: #D4D4D4">(messages) |&gt; </span><span style="color: #4EC9B0">Map</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">fetch!</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&quot;update_id&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">end</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">defp</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">updates_url</span><span style="color: #D4D4D4">(</span><span style="color: #6A9955">_offset</span><span style="color: #D4D4D4"> = </span><span style="color: #569CD6">nil</span><span style="color: #D4D4D4">) </span><span style="color: #C586C0">do</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">@basic_url</span><span style="color: #D4D4D4"> &lt;&gt; </span><span style="color: #CE9178">&quot;/getUpdates&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">end</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">defp</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">updates_url</span><span style="color: #D4D4D4">(offset) </span><span style="color: #C586C0">do</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">@basic_url</span><span style="color: #D4D4D4"> &lt;&gt; </span><span style="color: #CE9178">&quot;/getUpdates?offset=</span><span style="color: #569CD6">#{</span><span style="color: #D4D4D4">offset + </span><span style="color: #B5CEA8">1</span><span style="color: #569CD6">}</span><span style="color: #CE9178">&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">end</span></span>
<span class="line"><span style="color: #C586C0">end</span></span></code></pre><!-- HTML_TAG_END --></div> </div>  </div> <h3 class=" svelte-1lrv44l">Polite answer </h3> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><div class="codeBlock svelte-1may0mh codeBlock--with-filename"> <div class="fileName svelte-1may0mh">File: stocks_bot/lib/stocks_bot.ex</div> <!-- HTML_TAG_START --><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">defp</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">parse_messages</span><span style="color: #D4D4D4">(messages) </span><span style="color: #C586C0">do</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #4EC9B0">Enum</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">each</span><span style="color: #D4D4D4">(messages, </span><span style="color: #C586C0">fn</span><span style="color: #D4D4D4"> message -&gt;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">answer_to_message</span><span style="color: #D4D4D4">(message)</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">end</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  messages</span></span>
<span class="line"><span style="color: #C586C0">end</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C586C0">defp</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">answer_to_message</span><span style="color: #D4D4D4">(message) </span><span style="color: #C586C0">do</span></span>
<span class="line"><span style="color: #D4D4D4">  %{</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #CE9178">&quot;message&quot;</span><span style="color: #D4D4D4"> =&gt; %{</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #CE9178">&quot;chat&quot;</span><span style="color: #D4D4D4"> =&gt; %{</span><span style="color: #CE9178">&quot;id&quot;</span><span style="color: #D4D4D4"> =&gt; chat_id},</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #CE9178">&quot;text&quot;</span><span style="color: #D4D4D4"> =&gt; original_text</span></span>
<span class="line"><span style="color: #D4D4D4">    }</span></span>
<span class="line"><span style="color: #D4D4D4">  } = message</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  answer = %{</span></span>
<span class="line"><span style="color: #D4D4D4">    text: </span><span style="color: #CE9178">&quot;Hello: </span><span style="color: #569CD6">#{</span><span style="color: #D4D4D4">original_text</span><span style="color: #569CD6">}</span><span style="color: #CE9178">&quot;</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">    chat_id: chat_id</span></span>
<span class="line"><span style="color: #D4D4D4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #4EC9B0">HTTPoison</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">post</span><span style="color: #D4D4D4">(</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">@basic_url</span><span style="color: #D4D4D4"> &lt;&gt; </span><span style="color: #CE9178">&quot;/sendMessage&quot;</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #4EC9B0">Jason</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">encode!</span><span style="color: #D4D4D4">(answer),</span></span>
<span class="line"><span style="color: #D4D4D4">    [{</span><span style="color: #CE9178">&quot;Content-Type&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;application/json&quot;</span><span style="color: #D4D4D4">}]</span></span>
<span class="line"><span style="color: #D4D4D4">  )</span></span>
<span class="line"><span style="color: #C586C0">end</span></span></code></pre><!-- HTML_TAG_END --></div> </div>  </div> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><p class="paragraph svelte-5wsfqn">The <span class="code svelte-9l3qyq">answer_to_message </span> function uses pattern matching to pick
			up the sender&#39;s name and the text of the incoming message to send it back to the user as a post-request. </p></div>  </div> <h3 class=" svelte-1lrv44l">Using supervisor for the application </h3> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><p class="paragraph svelte-5wsfqn">First step is converting app to a Genserver. </p></div>  </div> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><div class="codeBlock svelte-1may0mh codeBlock--with-filename"> <div class="fileName svelte-1may0mh">File: stocks_bot/lib/stocks_bot.ex</div> <!-- HTML_TAG_START --><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">defmodule</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">StocksBot</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">do</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">use</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">GenServer</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">@basic_url</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;https://api.telegram.org/bot&quot;</span><span style="color: #D4D4D4"> &lt;&gt; </span><span style="color: #CE9178">&quot;Token from BotFather&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">start_link</span><span style="color: #D4D4D4">(args) </span><span style="color: #C586C0">do</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #4EC9B0">GenServer</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">start_link</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">__MODULE__</span><span style="color: #D4D4D4">, :ok, name: </span><span style="color: #569CD6">__MODULE__</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">end</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">@impl</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">true</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">init</span><span style="color: #D4D4D4">(:ok) </span><span style="color: #C586C0">do</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">get_updates</span><span style="color: #D4D4D4">()</span></span>
<span class="line"><span style="color: #D4D4D4">    {:ok, %{}}</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">end</span></span>
<span class="line"><span style="color: #C586C0">end</span></span></code></pre><!-- HTML_TAG_END --></div> </div>  </div> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><p class="paragraph svelte-5wsfqn">Then this Genserver need to be added to Supervisor Tree. </p></div>  </div> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><div class="codeBlock svelte-1may0mh codeBlock--with-filename"> <div class="fileName svelte-1may0mh">File: stocks_bot/lib/stocks_bot/application.ex</div> <!-- HTML_TAG_START --><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">defmodule</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">StocksBot</span><span style="color: #D4D4D4">.</span><span style="color: #4EC9B0">Application</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">do</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">use</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">Application</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">@impl</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">true</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">start</span><span style="color: #D4D4D4">(</span><span style="color: #6A9955">_type</span><span style="color: #D4D4D4">, </span><span style="color: #6A9955">_args</span><span style="color: #D4D4D4">) </span><span style="color: #C586C0">do</span></span>
<span class="line"><span style="color: #D4D4D4">    children = [ </span><span style="color: #4EC9B0">StocksBot</span><span style="color: #D4D4D4"> ]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    opts = [strategy: :one_for_one, name: </span><span style="color: #4EC9B0">StocksBot</span><span style="color: #D4D4D4">.</span><span style="color: #4EC9B0">Supervisor</span><span style="color: #D4D4D4">]</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #4EC9B0">Supervisor</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">start_link</span><span style="color: #D4D4D4">(children, opts)</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">end</span></span>
<span class="line"><span style="color: #C586C0">end</span></span></code></pre><!-- HTML_TAG_END --></div> </div> <div class="col-2 svelte-1usoguu"><div slot="aside"><ul class="links-list svelte-5n4j8k"><li class="svelte-5n4j8k"><a href="https://blog.appsignal.com/2021/08/23/using-supervisors-to-organize-your-elixir-application.html" class="links-list__link svelte-5n4j8k">Article from AppSignal with good examples</a> </li> </ul></div></div> </div> <h2 class=" svelte-1lrv44l">Demo time </h2> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><div class="video svelte-1lat3fd"><video controls class=""><source src="/_app/immutable/assets/demo_of_bot.Z59unOjj.mp4" type="video/mp4"><track src="" kind="captions" srclang="en" label="english_captions">
  Your browser does not support the video tag.</video>  </div></div> <div class="col-2 svelte-1usoguu"><div slot="aside"><ul class="links-list svelte-5n4j8k"><li class="svelte-5n4j8k"><a href="https://github.com/Rukomoynikov/telegram-bot-article" class="links-list__link svelte-5n4j8k">Github repository with bot source code</a> </li> </ul></div></div> </div> <div class="columns standard svelte-1usoguu"><div class="col-1 svelte-1usoguu"><p class="paragraph svelte-5wsfqn">Yes, the bot does not yet have superintelligence. In the next part, I will add user storage in
			the database and teach the bot to send stock price information. </p></div>  </div> </div> 
			
			<script>
				{
					__sveltekit_qpyvea = {
						base: new URL("..", location).pathname.slice(0, -1),
						env: null
					};

					const element = document.currentScript.parentElement;

					const data = [{"type":"data","data":{codes:{"posts/deploy-elixir-app-on-lightsail/Dockerfile.dockerfile":{code:"\u003Cpre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\" tabindex=\"0\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color: #6A9955\"># ----------------- # BASE # -----------------\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">FROM\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> elixir:alpine \u003C/span>\u003Cspan style=\"color: #569CD6\">AS\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> base\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">WORKDIR\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> /app\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">RUN\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> mix do local.hex --force, local.rebar --force\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">RUN\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> apk add npm inotify-tools\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #6A9955\"># ----------------- # BUILD #-----------------\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">FROM\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> base \u003C/span>\u003Cspan style=\"color: #569CD6\">AS\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> build\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">RUN\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> apk add curl bash git\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">ARG\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> MIX_ENV=prod\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">ENV\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> MIX_ENV=$MIX_ENV\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">COPY\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> ../../../../routes/posts/deploy-elixir-app-on-lightsail/snippets ./\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #6A9955\"># install application\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">RUN\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> mix do deps.get, compile\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #6A9955\"># ----------------- # RELEASE #-----------------\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">FROM\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> build \u003C/span>\u003Cspan style=\"color: #569CD6\">AS\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> release\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">ARG\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> MIX_ENV=prod\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #6A9955\"># digests and compresses static files RUN mix assets.deploy # generate release executable\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">RUN\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> mix phx.gen.release RUN mix release\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #6A9955\"># ----------------- #PRODUCTION # -----------------\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">FROM\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> elixir:alpine\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">WORKDIR\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> /app\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">ARG\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> MIX_ENV=prod\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #6A9955\"># install dependencies\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">RUN\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> apk add ncurses-libs curl\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">COPY\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> --from=release /app/_build/prod/rel/github_dashboard ./\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #6A9955\"># start application\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">CMD\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> [\u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;bin/server&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">, \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;start&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>",raw:"# ----------------- # BASE # -----------------\nFROM elixir:alpine AS base\nWORKDIR /app\nRUN mix do local.hex --force, local.rebar --force\nRUN apk add npm inotify-tools\n\n# ----------------- # BUILD #-----------------\nFROM base AS build\nRUN apk add curl bash git\nARG MIX_ENV=prod\nENV MIX_ENV=$MIX_ENV\nCOPY ../../../../routes/posts/deploy-elixir-app-on-lightsail/snippets ./\n\n# install application\nRUN mix do deps.get, compile\n\n# ----------------- # RELEASE #-----------------\nFROM build AS release\nARG MIX_ENV=prod\n\n# digests and compresses static files RUN mix assets.deploy # generate release executable\nRUN mix phx.gen.release RUN mix release\n\n# ----------------- #PRODUCTION # -----------------\nFROM elixir:alpine\nWORKDIR /app\nARG MIX_ENV=prod\n\n# install dependencies\nRUN apk add ncurses-libs curl\nCOPY --from=release /app/_build/prod/rel/github_dashboard ./\n\n# start application\nCMD [\"bin/server\", \"start\"]\n"},"posts/deploy-elixir-app-on-lightsail/create_new_app.sh":{code:"\u003Cpre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\" tabindex=\"0\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color: #6A9955\"># Scaffolding application mix phx.new github_dashboard --no-ecto\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #DCDCAA\">mix\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">phx.new\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">github_dashboard\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #569CD6\">--no-ecto\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>",raw:"# Scaffolding application mix phx.new github_dashboard --no-ecto\nmix phx.new github_dashboard --no-ecto\n"},"posts/deploy-elixir-app-on-lightsail/github-ci.yml":{code:"\u003Cpre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\" tabindex=\"0\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">name\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">Elixir CI\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">on\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">push\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">permissions\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">contents\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">read\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">env\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">CONTAINER_SERVICE_NAME\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">&lt;container service name&gt;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">AWS_REGION\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">&lt;aws region&gt;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">DOCKER_TAG\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">&lt;some name to tag your docker images in Lightsail hub&gt;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">jobs\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">build\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #569CD6\">name\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">Build and test\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #569CD6\">runs-on\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">ubuntu-latest\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #569CD6\">steps\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    - \u003C/span>\u003Cspan style=\"color: #569CD6\">uses\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">actions/checkout@v3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    - \u003C/span>\u003Cspan style=\"color: #569CD6\">name\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">Set up Elixir\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">uses\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">erlef/setup-beam@988e02bfe678367a02564f65ca2e37726dc0268f\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">with\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #569CD6\">elixir-version\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">&#39;1.12.3&#39;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #6A9955\"># Define the elixir version [required]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #569CD6\">otp-version\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">&#39;24.1&#39;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #6A9955\"># Define the OTP version [required]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    - \u003C/span>\u003Cspan style=\"color: #569CD6\">name\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">Restore dependencies cache\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">uses\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">actions/cache@v3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">with\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #569CD6\">path\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">deps\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #569CD6\">key\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">${{ runner.os }}-mix-${{ hashFiles(&#39;**/mix.lock&#39;) }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #569CD6\">restore-keys\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">${{ runner.os }}-mix-\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    - \u003C/span>\u003Cspan style=\"color: #569CD6\">name\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">Install dependencies\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">run\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">mix deps.get\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    - \u003C/span>\u003Cspan style=\"color: #569CD6\">name\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">Run tests\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">run\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">mix test\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">deploy\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #569CD6\">name\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">Deploy to Lightsail\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #569CD6\">runs-on\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">ubuntu-latest\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #569CD6\">steps\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    - \u003C/span>\u003Cspan style=\"color: #569CD6\">uses\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">actions/checkout@v3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    - \u003C/span>\u003Cspan style=\"color: #569CD6\">name\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">Build docker container\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">run\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #C586C0\">|\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #CE9178\">        docker build . -t $DOCKER_TAG\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #6A9955\"># By default AWS cli is available in Github Actions environment, but not Lightsail cli. So we need to install it manualy.\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    - \u003C/span>\u003Cspan style=\"color: #569CD6\">name\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">Install LightSail AWS CLI plugin\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">run\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #C586C0\">|\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #CE9178\">        curl &quot;https://s3.us-west-2.amazonaws.com/lightsailctl/latest/linux-amd64/lightsailctl&quot; -o &quot;/usr/local/bin/lightsailctl&quot;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #CE9178\">        sudo chmod +x /usr/local/bin/lightsailctl\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #6A9955\"># Please add you AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY into your Github Repo.\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    - \u003C/span>\u003Cspan style=\"color: #569CD6\">name\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">Configure AWS Credentials\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">uses\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">aws-actions/configure-aws-credentials@v1\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">with\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #569CD6\">aws-access-key-id\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">${{ secrets.AWS_ACCESS_KEY_ID }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #569CD6\">aws-secret-access-key\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">${{ secrets.AWS_SECRET_ACCESS_KEY }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #569CD6\">aws-region\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">${{ env.AWS_REGION }}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    - \u003C/span>\u003Cspan style=\"color: #569CD6\">name\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">Push new version to LightSail\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">run\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">aws lightsail push-container-image --region $AWS_REGION --service-name $CONTAINER_SERVICE_NAME --label $DOCKER_TAG --image $DOCKER_TAG:latest\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    - \u003C/span>\u003Cspan style=\"color: #569CD6\">name\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">Deploy pushed container\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">run\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">aws lightsail create-container-service-deployment --service-name $CONTAINER_SERVICE_NAME --containers file://lightsail/containers.json --public-endpoint file://lightsail/public-endpoint.json\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>",raw:"name: Elixir CI\n\non:\npush:\n\npermissions:\ncontents: read\n\nenv:\nCONTAINER_SERVICE_NAME: \u003Ccontainer service name>\nAWS_REGION: \u003Caws region>\nDOCKER_TAG: \u003Csome name to tag your docker images in Lightsail hub>\n\njobs:\nbuild:\n  name: Build and test\n  runs-on: ubuntu-latest\n  steps:\n    - uses: actions/checkout@v3\n    - name: Set up Elixir\n      uses: erlef/setup-beam@988e02bfe678367a02564f65ca2e37726dc0268f\n      with:\n        elixir-version: '1.12.3' # Define the elixir version [required]\n        otp-version: '24.1' # Define the OTP version [required]\n    - name: Restore dependencies cache\n      uses: actions/cache@v3\n      with:\n        path: deps\n        key: ${{ runner.os }}-mix-${{ hashFiles('**/mix.lock') }}\n        restore-keys: ${{ runner.os }}-mix-\n    - name: Install dependencies\n      run: mix deps.get\n    - name: Run tests\n      run: mix test\ndeploy:\n  name: Deploy to Lightsail\n  runs-on: ubuntu-latest\n  steps:\n    - uses: actions/checkout@v3\n    - name: Build docker container\n      run: |\n        docker build . -t $DOCKER_TAG\n    # By default AWS cli is available in Github Actions environment, but not Lightsail cli. So we need to install it manualy.\n    - name: Install LightSail AWS CLI plugin\n      run: |\n        curl \"https://s3.us-west-2.amazonaws.com/lightsailctl/latest/linux-amd64/lightsailctl\" -o \"/usr/local/bin/lightsailctl\"\n        sudo chmod +x /usr/local/bin/lightsailctl\n    # Please add you AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY into your Github Repo.\n    - name: Configure AWS Credentials\n      uses: aws-actions/configure-aws-credentials@v1\n      with:\n        aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}\n        aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n        aws-region: ${{ env.AWS_REGION }}\n    - name: Push new version to LightSail\n      run: aws lightsail push-container-image --region $AWS_REGION --service-name $CONTAINER_SERVICE_NAME --label $DOCKER_TAG --image $DOCKER_TAG:latest\n    - name: Deploy pushed container\n      run: aws lightsail create-container-service-deployment --service-name $CONTAINER_SERVICE_NAME --containers file://lightsail/containers.json --public-endpoint file://lightsail/public-endpoint.json\n"},"posts/deploy-elixir-app-on-lightsail/iam.json":{code:"\u003Cpre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\" tabindex=\"0\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">\t\u003C/span>\u003Cspan style=\"color: #9CDCFE\">&quot;Version&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;2012-10-17&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">\t\u003C/span>\u003Cspan style=\"color: #9CDCFE\">&quot;Statement&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">\t\t{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">\t\t\t\u003C/span>\u003Cspan style=\"color: #9CDCFE\">&quot;Sid&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;VisualEditor0&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">\t\t\t\u003C/span>\u003Cspan style=\"color: #9CDCFE\">&quot;Effect&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;Allow&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">\t\t\t\u003C/span>\u003Cspan style=\"color: #9CDCFE\">&quot;Action&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">\t\t\t\t\u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;lightsail:RegisterContainerImage&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">\t\t\t\t\u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;lightsail:CreateContainerServiceRegistryLogin&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">\t\t\t\t\u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;lightsail:CreateContainerServiceDeployment&quot;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">\t\t\t],\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">\t\t\t\u003C/span>\u003Cspan style=\"color: #9CDCFE\">&quot;Resource&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;*&quot;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">\t\t}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">\t]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>",raw:"{\n\t\"Version\": \"2012-10-17\",\n\t\"Statement\": [\n\t\t{\n\t\t\t\"Sid\": \"VisualEditor0\",\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Action\": [\n\t\t\t\t\"lightsail:RegisterContainerImage\",\n\t\t\t\t\"lightsail:CreateContainerServiceRegistryLogin\",\n\t\t\t\t\"lightsail:CreateContainerServiceDeployment\"\n\t\t\t],\n\t\t\t\"Resource\": \"*\"\n\t\t}\n\t]\n}\n"},"posts/elixir-telegran-bot/application.elixir":{code:"\u003Cpre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\" tabindex=\"0\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color: #C586C0\">defmodule\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #4EC9B0\">StocksBot\u003C/span>\u003Cspan style=\"color: #D4D4D4\">.\u003C/span>\u003Cspan style=\"color: #4EC9B0\">Application\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #C586C0\">do\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">use\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #4EC9B0\">Application\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #9CDCFE\">@impl\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #569CD6\">true\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">def\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #DCDCAA\">start\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(\u003C/span>\u003Cspan style=\"color: #6A9955\">_type\u003C/span>\u003Cspan style=\"color: #D4D4D4\">, \u003C/span>\u003Cspan style=\"color: #6A9955\">_args\u003C/span>\u003Cspan style=\"color: #D4D4D4\">) \u003C/span>\u003Cspan style=\"color: #C586C0\">do\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    children = [ \u003C/span>\u003Cspan style=\"color: #4EC9B0\">StocksBot\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> ]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    opts = [strategy: :one_for_one, name: \u003C/span>\u003Cspan style=\"color: #4EC9B0\">StocksBot\u003C/span>\u003Cspan style=\"color: #D4D4D4\">.\u003C/span>\u003Cspan style=\"color: #4EC9B0\">Supervisor\u003C/span>\u003Cspan style=\"color: #D4D4D4\">]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #4EC9B0\">Supervisor\u003C/span>\u003Cspan style=\"color: #D4D4D4\">.\u003C/span>\u003Cspan style=\"color: #DCDCAA\">start_link\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(children, opts)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003C/span>\u003C/code>\u003C/pre>",raw:"defmodule StocksBot.Application do\n  use Application\n\n  @impl true\n  def start(_type, _args) do\n    children = [ StocksBot ]\n\n    opts = [strategy: :one_for_one, name: StocksBot.Supervisor]\n    Supervisor.start_link(children, opts)\n  end\nend"},"posts/elixir-telegran-bot/deps.elixir":{code:"\u003Cpre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\" tabindex=\"0\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color: #C586C0\">defp\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #DCDCAA\">deps\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #C586C0\">do\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    {:httpoison, \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;~&gt; 1.8&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">},\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    {:jason, \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;~&gt; 1.2&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  ]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003C/span>\u003C/code>\u003C/pre>",raw:"defp deps do\n  [\n    {:httpoison, \"~> 1.8\"},\n    {:jason, \"~> 1.2\"}\n  ]\nend"},"posts/elixir-telegran-bot/messages_log.elixir":{code:"\u003Cpre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\" tabindex=\"0\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">[\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  %{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;message&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; %{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;chat&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; %{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;first_name&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;Bender&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;id&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; \u003C/span>\u003Cspan style=\"color: #B5CEA8\">300011235\u003C/span>\u003Cspan style=\"color: #D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;last_name&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;Rodriguez&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;type&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;private&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;username&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;bender&quot;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;date&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; \u003C/span>\u003Cspan style=\"color: #B5CEA8\">1636549063\u003C/span>\u003Cspan style=\"color: #D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;from&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; %{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;first_name&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;Bender&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;id&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; \u003C/span>\u003Cspan style=\"color: #B5CEA8\">300011235\u003C/span>\u003Cspan style=\"color: #D4D4D4\">,,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;is_bot&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; \u003C/span>\u003Cspan style=\"color: #569CD6\">false\u003C/span>\u003Cspan style=\"color: #D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;language_code&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;ru&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;last_name&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;Rodriguez&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;username&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;bender&quot;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;message_id&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; \u003C/span>\u003Cspan style=\"color: #B5CEA8\">1142\u003C/span>\u003Cspan style=\"color: #D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;text&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;Hello&quot;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;update_id&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; \u003C/span>\u003Cspan style=\"color: #B5CEA8\">475896056\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">]\u003C/span>\u003C/span>\u003C/code>\u003C/pre>",raw:"[\n  %{\n    \"message\" => %{\n      \"chat\" => %{\n        \"first_name\" => \"Bender\",\n        \"id\" => 300011235,\n        \"last_name\" => \"Rodriguez\",\n        \"type\" => \"private\",\n        \"username\" => \"bender\"\n      },\n      \"date\" => 1636549063,\n      \"from\" => %{\n        \"first_name\" => \"Bender\",\n        \"id\" => 300011235,,\n        \"is_bot\" => false,\n        \"language_code\" => \"ru\",\n        \"last_name\" => \"Rodriguez\",\n        \"username\" => \"bender\"\n      },\n      \"message_id\" => 1142,\n      \"text\" => \"Hello\"\n    },\n    \"update_id\" => 475896056\n  }\n]"},"posts/elixir-telegran-bot/new_elixir_app.sh":{code:"\u003Cpre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\" tabindex=\"0\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color: #DCDCAA\">mix\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">new\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">stocks_bot\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #569CD6\">--sup\u003C/span>\u003C/span>\u003C/code>\u003C/pre>",raw:"mix new stocks_bot --sup"},"posts/elixir-telegran-bot/stocks_bot.elixir":{code:"\u003Cpre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\" tabindex=\"0\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color: #C586C0\">defmodule\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #4EC9B0\">StocksBot\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #C586C0\">do\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">use\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #4EC9B0\">GenServer\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #9CDCFE\">@basic_url\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;https://api.telegram.org/bot&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> &lt;&gt; \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;Token from BotFather&quot;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">def\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #DCDCAA\">start_link\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(args) \u003C/span>\u003Cspan style=\"color: #C586C0\">do\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #4EC9B0\">GenServer\u003C/span>\u003Cspan style=\"color: #D4D4D4\">.\u003C/span>\u003Cspan style=\"color: #DCDCAA\">start_link\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(\u003C/span>\u003Cspan style=\"color: #569CD6\">__MODULE__\u003C/span>\u003Cspan style=\"color: #D4D4D4\">, :ok, name: \u003C/span>\u003Cspan style=\"color: #569CD6\">__MODULE__\u003C/span>\u003Cspan style=\"color: #D4D4D4\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #9CDCFE\">@impl\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #569CD6\">true\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">def\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #DCDCAA\">init\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(:ok) \u003C/span>\u003Cspan style=\"color: #C586C0\">do\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #DCDCAA\">get_updates\u003C/span>\u003Cspan style=\"color: #D4D4D4\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    {:ok, %{}}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003C/span>\u003C/code>\u003C/pre>",raw:"defmodule StocksBot do\n  use GenServer\n  @basic_url \"https://api.telegram.org/bot\" \u003C> \"Token from BotFather\"\n\n  def start_link(args) do\n    GenServer.start_link(__MODULE__, :ok, name: __MODULE__)\n  end\n\n  @impl true\n  def init(:ok) do\n    get_updates()\n    {:ok, %{}}\n  end\nend"},"posts/elixir-telegran-bot/stocks_bot_2.elixir":{code:"\u003Cpre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\" tabindex=\"0\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color: #C586C0\">defp\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #DCDCAA\">parse_messages\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(messages) \u003C/span>\u003Cspan style=\"color: #C586C0\">do\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #4EC9B0\">Enum\u003C/span>\u003Cspan style=\"color: #D4D4D4\">.\u003C/span>\u003Cspan style=\"color: #DCDCAA\">each\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(messages, \u003C/span>\u003Cspan style=\"color: #C586C0\">fn\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> message -&gt;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #DCDCAA\">answer_to_message\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(message)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003Cspan style=\"color: #D4D4D4\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  messages\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #C586C0\">defp\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #DCDCAA\">answer_to_message\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(message) \u003C/span>\u003Cspan style=\"color: #C586C0\">do\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  %{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;message&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; %{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;chat&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; %{\u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;id&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; chat_id},\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;text&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> =&gt; original_text\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  } = message\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  answer = %{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    text: \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;Hello: \u003C/span>\u003Cspan style=\"color: #569CD6\">#{\u003C/span>\u003Cspan style=\"color: #D4D4D4\">original_text\u003C/span>\u003Cspan style=\"color: #569CD6\">}\u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    chat_id: chat_id\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #4EC9B0\">HTTPoison\u003C/span>\u003Cspan style=\"color: #D4D4D4\">.\u003C/span>\u003Cspan style=\"color: #DCDCAA\">post\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #9CDCFE\">@basic_url\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> &lt;&gt; \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;/sendMessage&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #4EC9B0\">Jason\u003C/span>\u003Cspan style=\"color: #D4D4D4\">.\u003C/span>\u003Cspan style=\"color: #DCDCAA\">encode!\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(answer),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    [{\u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;Content-Type&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">, \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;application/json&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">}]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  )\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003C/span>\u003C/code>\u003C/pre>",raw:"defp parse_messages(messages) do\n  Enum.each(messages, fn message ->\n    answer_to_message(message)\n  end)\n\n  messages\nend\n\ndefp answer_to_message(message) do\n  %{\n    \"message\" => %{\n      \"chat\" => %{\"id\" => chat_id},\n      \"text\" => original_text\n    }\n  } = message\n\n  answer = %{\n    text: \"Hello: #{original_text}\",\n    chat_id: chat_id\n  }\n\n  HTTPoison.post(\n    @basic_url \u003C> \"/sendMessage\",\n    Jason.encode!(answer),\n    [{\"Content-Type\", \"application/json\"}]\n  )\nend"},"posts/elixir-telegran-bot/stocks_bot_3.elixir":{code:"\u003Cpre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\" tabindex=\"0\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color: #C586C0\">defmodule\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #4EC9B0\">StocksBot\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #C586C0\">do\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #9CDCFE\">@basic_url\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;https://api.telegram.org/bot&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> &lt;&gt; \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;Token from BotFather&quot;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">def\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #DCDCAA\">get_updates\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(offset \\\\ \u003C/span>\u003Cspan style=\"color: #569CD6\">nil\u003C/span>\u003Cspan style=\"color: #D4D4D4\">) \u003C/span>\u003Cspan style=\"color: #C586C0\">do\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #C586C0\">with\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> {:ok, %\u003C/span>\u003Cspan style=\"color: #4EC9B0\">HTTPoison\u003C/span>\u003Cspan style=\"color: #D4D4D4\">.\u003C/span>\u003Cspan style=\"color: #4EC9B0\">Response\u003C/span>\u003Cspan style=\"color: #D4D4D4\">{status_code: \u003C/span>\u003Cspan style=\"color: #B5CEA8\">200\u003C/span>\u003Cspan style=\"color: #D4D4D4\">, body: body}} =\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">           \u003C/span>\u003Cspan style=\"color: #DCDCAA\">updates_url\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(offset) |&gt; \u003C/span>\u003Cspan style=\"color: #4EC9B0\">HTTPoison\u003C/span>\u003Cspan style=\"color: #D4D4D4\">.\u003C/span>\u003Cspan style=\"color: #DCDCAA\">get\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">         {:ok, data} = \u003C/span>\u003Cspan style=\"color: #4EC9B0\">Jason\u003C/span>\u003Cspan style=\"color: #D4D4D4\">.\u003C/span>\u003Cspan style=\"color: #DCDCAA\">decode\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(body) \u003C/span>\u003Cspan style=\"color: #C586C0\">do\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #DCDCAA\">parse_messages\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(data[\u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;result&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">])\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      |&gt; \u003C/span>\u003Cspan style=\"color: #DCDCAA\">get_last_update_id\u003C/span>\u003Cspan style=\"color: #D4D4D4\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      |&gt; \u003C/span>\u003Cspan style=\"color: #DCDCAA\">get_updates\u003C/span>\u003Cspan style=\"color: #D4D4D4\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">defp\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #DCDCAA\">parse_messages\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(messages) \u003C/span>\u003Cspan style=\"color: #C586C0\">do\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #4EC9B0\">Enum\u003C/span>\u003Cspan style=\"color: #D4D4D4\">.\u003C/span>\u003Cspan style=\"color: #DCDCAA\">each\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(messages, \u003C/span>\u003Cspan style=\"color: #C586C0\">fn\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> message -&gt;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #4EC9B0\">IO\u003C/span>\u003Cspan style=\"color: #D4D4D4\">.\u003C/span>\u003Cspan style=\"color: #DCDCAA\">inspect\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(message)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003Cspan style=\"color: #D4D4D4\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    messages\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">defp\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #DCDCAA\">get_last_update_id\u003C/span>\u003Cspan style=\"color: #D4D4D4\">([]), do: \u003C/span>\u003Cspan style=\"color: #569CD6\">nil\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">defp\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #DCDCAA\">get_last_update_id\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(messages) \u003C/span>\u003Cspan style=\"color: #C586C0\">do\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #4EC9B0\">List\u003C/span>\u003Cspan style=\"color: #D4D4D4\">.\u003C/span>\u003Cspan style=\"color: #DCDCAA\">last\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(messages) |&gt; \u003C/span>\u003Cspan style=\"color: #4EC9B0\">Map\u003C/span>\u003Cspan style=\"color: #D4D4D4\">.\u003C/span>\u003Cspan style=\"color: #DCDCAA\">fetch!\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(\u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;update_id&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">defp\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #DCDCAA\">updates_url\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(\u003C/span>\u003Cspan style=\"color: #6A9955\">_offset\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> = \u003C/span>\u003Cspan style=\"color: #569CD6\">nil\u003C/span>\u003Cspan style=\"color: #D4D4D4\">) \u003C/span>\u003Cspan style=\"color: #C586C0\">do\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #9CDCFE\">@basic_url\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> &lt;&gt; \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;/getUpdates&quot;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">defp\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #DCDCAA\">updates_url\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(offset) \u003C/span>\u003Cspan style=\"color: #C586C0\">do\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #9CDCFE\">@basic_url\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> &lt;&gt; \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;/getUpdates?offset=\u003C/span>\u003Cspan style=\"color: #569CD6\">#{\u003C/span>\u003Cspan style=\"color: #D4D4D4\">offset + \u003C/span>\u003Cspan style=\"color: #B5CEA8\">1\u003C/span>\u003Cspan style=\"color: #569CD6\">}\u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003C/span>\u003C/code>\u003C/pre>",raw:"defmodule StocksBot do\n  @basic_url \"https://api.telegram.org/bot\" \u003C> \"Token from BotFather\"\n\n  def get_updates(offset \\\\ nil) do\n    with {:ok, %HTTPoison.Response{status_code: 200, body: body}} =\n           updates_url(offset) |> HTTPoison.get(),\n         {:ok, data} = Jason.decode(body) do\n\n      parse_messages(data[\"result\"])\n      |> get_last_update_id()\n      |> get_updates()\n    end\n  end\n\n  defp parse_messages(messages) do\n    Enum.each(messages, fn message ->\n      IO.inspect(message)\n    end)\n\n    messages\n  end\n\n  defp get_last_update_id([]), do: nil\n\n  defp get_last_update_id(messages) do\n    List.last(messages) |> Map.fetch!(\"update_id\")\n  end\n\n  defp updates_url(_offset = nil) do\n    @basic_url \u003C> \"/getUpdates\"\n  end\n\n  defp updates_url(offset) do\n    @basic_url \u003C> \"/getUpdates?offset=#{offset + 1}\"\n  end\nend"},"posts/elixir-telegran-bot/stocks_bot_initial.elixir":{code:"\u003Cpre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\" tabindex=\"0\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color: #C586C0\">defmodule\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #4EC9B0\">StocksBot\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #C586C0\">do\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #9CDCFE\">@basic_url\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;https://api.telegram.org/bot&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> &lt;&gt; \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;Token from BotFather&quot;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">def\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #DCDCAA\">get_updates\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(offset \\\\ \u003C/span>\u003Cspan style=\"color: #569CD6\">nil\u003C/span>\u003Cspan style=\"color: #D4D4D4\">) \u003C/span>\u003Cspan style=\"color: #C586C0\">do\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #C586C0\">with\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> {:ok, %\u003C/span>\u003Cspan style=\"color: #4EC9B0\">HTTPoison\u003C/span>\u003Cspan style=\"color: #D4D4D4\">.\u003C/span>\u003Cspan style=\"color: #4EC9B0\">Response\u003C/span>\u003Cspan style=\"color: #D4D4D4\">{status_code: \u003C/span>\u003Cspan style=\"color: #B5CEA8\">200\u003C/span>\u003Cspan style=\"color: #D4D4D4\">, body: body}} =\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">           \u003C/span>\u003Cspan style=\"color: #DCDCAA\">updates_url\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(offset) |&gt; \u003C/span>\u003Cspan style=\"color: #4EC9B0\">HTTPoison\u003C/span>\u003Cspan style=\"color: #D4D4D4\">.\u003C/span>\u003Cspan style=\"color: #DCDCAA\">get\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">         {:ok, data} = \u003C/span>\u003Cspan style=\"color: #4EC9B0\">Jason\u003C/span>\u003Cspan style=\"color: #D4D4D4\">.\u003C/span>\u003Cspan style=\"color: #DCDCAA\">decode\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(body) \u003C/span>\u003Cspan style=\"color: #C586C0\">do\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #4EC9B0\">IO\u003C/span>\u003Cspan style=\"color: #D4D4D4\">.\u003C/span>\u003Cspan style=\"color: #DCDCAA\">inspect\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(data[\u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;result&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\">])\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">defp\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #DCDCAA\">updates_url\u003C/span>\u003Cspan style=\"color: #D4D4D4\">(\u003C/span>\u003Cspan style=\"color: #6A9955\">_offset\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> = \u003C/span>\u003Cspan style=\"color: #569CD6\">nil\u003C/span>\u003Cspan style=\"color: #D4D4D4\">) \u003C/span>\u003Cspan style=\"color: #C586C0\">do\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #9CDCFE\">@basic_url\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> &lt;&gt; \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;/getUpdates&quot;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #C586C0\">end\u003C/span>\u003C/span>\u003C/code>\u003C/pre>",raw:"defmodule StocksBot do\n  @basic_url \"https://api.telegram.org/bot\" \u003C> \"Token from BotFather\"\n\n  def get_updates(offset \\\\ nil) do\n    with {:ok, %HTTPoison.Response{status_code: 200, body: body}} =\n           updates_url(offset) |> HTTPoison.get(),\n         {:ok, data} = Jason.decode(body) do\n      IO.inspect(data[\"result\"])\n    end\n  end\n\n  defp updates_url(_offset = nil) do\n    @basic_url \u003C> \"/getUpdates\"\n  end\nend"},"posts/elixir-telegran-bot/structure.sh":{code:"\u003Cpre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\" tabindex=\"0\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color: #DCDCAA\">├──\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">README.md\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #DCDCAA\">├──\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">lib\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #DCDCAA\">│\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">├──\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">stocks_bot\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #DCDCAA\">│\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">│\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">└──\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">application.ex\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #DCDCAA\">│\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">└──stocks_bot.ex\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #DCDCAA\">├──\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">mix.exs\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #DCDCAA\">└──\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">test\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #DCDCAA\">├──\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">stocks_bot_test.exs\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #DCDCAA\">└──\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">test_helper.exs\u003C/span>\u003C/span>\u003C/code>\u003C/pre>",raw:"├── README.md\n├── lib\n│ ├── stocks_bot\n│ │ └── application.ex\n│ └──stocks_bot.ex\n├── mix.exs\n└── test\n├── stocks_bot_test.exs\n└── test_helper.exs"},"posts/elixir-telegran-bot/test_bot.sh":{code:"\u003Cpre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\" tabindex=\"0\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color: #DCDCAA\">iex\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #569CD6\">-S\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">mix\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #DCDCAA\">StocksBot.get_updates\u003C/span>\u003Cspan style=\"color: #D4D4D4\">()\u003C/span>\u003C/span>\u003C/code>\u003C/pre>",raw:"iex -S mix\nStocksBot.get_updates()"},"posts/rails-on-docker/docker-compose.yml":{code:"\u003Cpre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\" tabindex=\"0\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">services\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #569CD6\">web\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">image\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">rukomoynikov/rails:2.7.1\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">volumes\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      - \u003C/span>\u003Cspan style=\"color: #CE9178\">./:/app\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      - \u003C/span>\u003Cspan style=\"color: #CE9178\">rails_cache:/app/tmp/cache\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      - \u003C/span>\u003Cspan style=\"color: #CE9178\">bundle:/usr/local/bundle\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">ports\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      - \u003C/span>\u003Cspan style=\"color: #CE9178\">3000:3000\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">tmpfs\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      - \u003C/span>\u003Cspan style=\"color: #CE9178\">/tmp\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      - \u003C/span>\u003Cspan style=\"color: #CE9178\">/app/tmp/pids\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">depends_on\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">postgres\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #569CD6\">condition\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">service_healthy\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">redis\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">        \u003C/span>\u003Cspan style=\"color: #569CD6\">condition\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">service_healthy\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">command\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">bundle exec rails server -b 0.0.0.0\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #569CD6\">client\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">image\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">rukomoynikov/rails:2.7.1\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">command\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">yarn run build -w\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">ports\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      - \u003C/span>\u003Cspan style=\"color: #CE9178\">&#39;3035:3035&#39;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">volumes\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      - \u003C/span>\u003Cspan style=\"color: #CE9178\">./:/app:cached\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      - \u003C/span>\u003Cspan style=\"color: #CE9178\">bundle:/usr/local/bundle\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      - \u003C/span>\u003Cspan style=\"color: #CE9178\">node_modules:/app/node_modules\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      - \u003C/span>\u003Cspan style=\"color: #CE9178\">packs:/app/public/packs\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">environment\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">WEBPACKER_DEV_SERVER_HOST\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #B5CEA8\">0.0.0.0\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #569CD6\">postgres\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">image\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">postgres:13\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">volumes\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      - \u003C/span>\u003Cspan style=\"color: #CE9178\">postgres:/var/lib/postgresql/data\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">environment\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">PSQL_HISTFILE\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">/root/log/.psql_history\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">POSTGRES_PASSWORD\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">postgres\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">ports\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      - \u003C/span>\u003Cspan style=\"color: #B5CEA8\">5432\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">healthcheck\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">test\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">pg_isready -U postgres -h 127.0.0.1\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">interval\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">5s\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #569CD6\">redis\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">image\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">redis:3.2-alpine\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">volumes\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      - \u003C/span>\u003Cspan style=\"color: #CE9178\">redis:/data\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">ports\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      - \u003C/span>\u003Cspan style=\"color: #B5CEA8\">6379\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    \u003C/span>\u003Cspan style=\"color: #569CD6\">healthcheck\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">test\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">redis-cli ping\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">interval\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">1s\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">timeout\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #CE9178\">3s\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">      \u003C/span>\u003Cspan style=\"color: #569CD6\">retries\u003C/span>\u003Cspan style=\"color: #D4D4D4\">: \u003C/span>\u003Cspan style=\"color: #B5CEA8\">30\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">volumes\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #569CD6\">postgres\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #569CD6\">redis\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #569CD6\">bundle\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #569CD6\">rails_cache\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #569CD6\">node_modules\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  \u003C/span>\u003Cspan style=\"color: #569CD6\">packs\u003C/span>\u003Cspan style=\"color: #D4D4D4\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>",raw:"services:\n  web:\n    image: rukomoynikov/rails:2.7.1\n    volumes:\n      - ./:/app\n      - rails_cache:/app/tmp/cache\n      - bundle:/usr/local/bundle\n    ports:\n      - 3000:3000\n    tmpfs:\n      - /tmp\n      - /app/tmp/pids\n    depends_on:\n      postgres:\n        condition: service_healthy\n      redis:\n        condition: service_healthy\n    command: bundle exec rails server -b 0.0.0.0\n  client:\n    image: rukomoynikov/rails:2.7.1\n    command: yarn run build -w\n    ports:\n      - '3035:3035'\n    volumes:\n      - ./:/app:cached\n      - bundle:/usr/local/bundle\n      - node_modules:/app/node_modules\n      - packs:/app/public/packs\n    environment:\n      WEBPACKER_DEV_SERVER_HOST: 0.0.0.0\n  postgres:\n    image: postgres:13\n    volumes:\n      - postgres:/var/lib/postgresql/data\n    environment:\n      PSQL_HISTFILE: /root/log/.psql_history\n      POSTGRES_PASSWORD: postgres\n    ports:\n      - 5432\n    healthcheck:\n      test: pg_isready -U postgres -h 127.0.0.1\n      interval: 5s\n  redis:\n    image: redis:3.2-alpine\n    volumes:\n      - redis:/data\n    ports:\n      - 6379\n    healthcheck:\n      test: redis-cli ping\n      interval: 1s\n      timeout: 3s\n      retries: 30\n\nvolumes:\n  postgres:\n  redis:\n  bundle:\n  rails_cache:\n  node_modules:\n  packs:\n"},"posts/rails-on-docker/example.dockerfile":{code:"\u003Cpre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\" tabindex=\"0\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">FROM\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> debian:bullseye\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">WORKDIR\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> /app\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">ARG\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> ruby_version=2.7.1\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">ARG\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> PG_MAJOR=13\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">ARG\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> NODE_MAJOR=14\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #6A9955\"># Installing general packages\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">RUN\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> apt update \\\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  &amp;&amp; apt upgrade -y \\\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  &amp;&amp; apt install libpq-dev postgresql-client-$PG_MAJOR gnupg2 git wget curl vim build-essential libssl-dev zlib1g-dev libyaml-dev libffi-dev -y\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #6A9955\"># Installing rbenv and ruby\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">RUN\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> apt install rbenv -y \\\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  &amp;&amp; echo \u003C/span>\u003Cspan style=\"color: #CE9178\">&#39;eval &quot;$(rbenv init -)&quot;&#39;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> &gt;&gt; ~/.bashrc \\\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  &amp;&amp; rbenv install $ruby_version \\\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">    &amp;&amp; rbenv global $ruby_version \\\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  &amp;&amp; eval \u003C/span>\u003Cspan style=\"color: #CE9178\">&quot;$(rbenv init -)&quot;\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \\\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  &amp;&amp; gem install rails\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #6A9955\">#Installing node and yarn\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">RUN\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> curl -sL https://deb.nodesource.com/setup_$NODE_MAJOR.x | bash - \\\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  &amp;&amp; apt install nodejs \\\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #D4D4D4\">  &amp;&amp; npm i -g yarn\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color: #569CD6\">ENV\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> PATH /root/.rbenv/versions/$ruby_version/bin/:/root/.rbenv/shims:$PATH\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>",raw:"FROM debian:bullseye\n\nWORKDIR /app\n\nARG ruby_version=2.7.1\nARG PG_MAJOR=13\nARG NODE_MAJOR=14\n\n# Installing general packages\nRUN apt update \\\n  && apt upgrade -y \\\n  && apt install libpq-dev postgresql-client-$PG_MAJOR gnupg2 git wget curl vim build-essential libssl-dev zlib1g-dev libyaml-dev libffi-dev -y\n\n# Installing rbenv and ruby\nRUN apt install rbenv -y \\\n  && echo 'eval \"$(rbenv init -)\"' >> ~/.bashrc \\\n  && rbenv install $ruby_version \\\n    && rbenv global $ruby_version \\\n  && eval \"$(rbenv init -)\" \\\n  && gem install rails\n\n#Installing node and yarn\nRUN curl -sL https://deb.nodesource.com/setup_$NODE_MAJOR.x | bash - \\\n  && apt install nodejs \\\n  && npm i -g yarn\n\nENV PATH /root/.rbenv/versions/$ruby_version/bin/:/root/.rbenv/shims:$PATH\n"},"posts/rails-on-docker/rails_bash.sh":{code:"\u003Cpre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\" tabindex=\"0\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color: #DCDCAA\">docker\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">run\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #569CD6\">--rm\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #569CD6\">-it\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #569CD6\">-p\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #B5CEA8\">3000\u003C/span>\u003Cspan style=\"color: #CE9178\">:3000\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #569CD6\">-v\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">/$(\u003C/span>\u003Cspan style=\"color: #DCDCAA\">pwd\u003C/span>\u003Cspan style=\"color: #CE9178\">):/app\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">rukomoynikov/rails\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">bash\u003C/span>\u003C/span>\u003C/code>\u003C/pre>",raw:"docker run --rm -it -p 3000:3000 -v /$(pwd):/app rukomoynikov/rails bash"},"posts/rails-on-docker/rails_new.sh":{code:"\u003Cpre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\" tabindex=\"0\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color: #DCDCAA\">docker\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">run\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #569CD6\">--rm\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #569CD6\">-v\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">/$(\u003C/span>\u003Cspan style=\"color: #DCDCAA\">pwd\u003C/span>\u003Cspan style=\"color: #CE9178\">):/app\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">rukomoynikov/rails\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">rails\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">new\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">.\u003C/span>\u003C/span>\u003C/code>\u003C/pre>",raw:"docker run --rm -v /$(pwd):/app rukomoynikov/rails rails new ."},"posts/rails-on-docker/start_rails.sh":{code:"\u003Cpre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\" tabindex=\"0\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color: #DCDCAA\">docker\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">run\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #569CD6\">--rm\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #569CD6\">-it\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #569CD6\">-p\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #B5CEA8\">3000\u003C/span>\u003Cspan style=\"color: #CE9178\">:3000\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #569CD6\">-v\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">/$(\u003C/span>\u003Cspan style=\"color: #DCDCAA\">pwd\u003C/span>\u003Cspan style=\"color: #CE9178\">):/app\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">rukomoynikov/rails\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">rails\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #CE9178\">s\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #569CD6\">-b\u003C/span>\u003Cspan style=\"color: #D4D4D4\"> \u003C/span>\u003Cspan style=\"color: #B5CEA8\">0.0\u003C/span>\u003Cspan style=\"color: #CE9178\">.0.0\u003C/span>\u003C/span>\u003C/code>\u003C/pre>",raw:"docker run --rm -it -p 3000:3000 -v /$(pwd):/app rukomoynikov/rails rails s -b 0.0.0.0"}}},"uses":{}},null];

					Promise.all([
						import("../_app/immutable/entry/start.Inmzhpnl.js"),
						import("../_app/immutable/entry/app.zjZhA0zo.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 4],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
